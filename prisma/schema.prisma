//Rules to follow//
//Model names should be singular and start with an uppercase letter.
//Field names should be in camelCase.
//Use appropriate data types for each field.
//Define relationships between models using @relation attribute.
// & write in the first model the relation field as an array if one-to-many.

generator client {
  provider     = "prisma-client-js"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
}

//Models
model User {
  id            Int            @id @default(autoincrement())
  uuid          String         @unique @default(uuid()) @db.Uuid
  email         String         @unique
  name          String
  phone         String
  address       String
  profileImage  String
  nidImage      String
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  businessInfo  BusinessInfo[]
  linkCreations ProductOrder[]
}

model BusinessCategory {
  id                   Int            @id @default(autoincrement())
  businessCategoryName String
  businessInfo         BusinessInfo[]
}

model BusinessInfo {
  id                     Int              @id @default(autoincrement())
  businessName           String
  businessLogo           String
  businessType           String
  businessAddress        String
  businessPhone          String
  businessEmail          String
  businessWebsite        String?
  businessTradeLicense   String
  businessWareHouse      String?
  businessStoreFrontLink String
  //Date
  createdAt              DateTime         @default(now())
  updatedAt              DateTime         @updatedAt
  //businessCategoryID
  businessCategoryId     Int
  businessCategory       BusinessCategory @relation(fields: [businessCategoryId], references: [id])
  //userID
  userId                 Int
  user                   User             @relation(fields: [userId], references: [id])
}

model ProductOrder {
  id                 Int           @id @default(autoincrement())
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt
  orderDate          String
  deliveryDate       String
  productName        String
  productDescription String
  productPrice       Float
  productQuantity    Int
  customerName       String
  customerEmail      String?
  customerPhone      String
  customerAddress    String
  invoiceNumber      String
  invoice            String
  profofDelivery     String
  userId             Int
  user               User          @relation(fields: [userId], references: [id])
  linkCreateds       linkCreated[]
}

model linkCreated {
  id        Int          @id @default(autoincrement())
  link      String
  createdAt DateTime     @default(now())
  expiry    DateTime
  //Relations
  productId Int
  product   ProductOrder @relation(fields: [productId], references: [id])
}
