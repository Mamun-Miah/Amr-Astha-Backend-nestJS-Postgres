# Common Errors & Solutions

## Error: "Element type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: undefined"

### Cause
This error typically occurs when:
1. A component is not properly exported/imported
2. Dependencies are missing or not installed correctly
3. Dynamic imports are failing

### Solutions

#### 1. Fix Icon Imports
The most common cause is dynamic icon imports. We've fixed this by:
- Using `import * as Icons from 'lucide-react'` instead of `require('lucide-react')[iconName]`
- Proper type casting for icon components

#### 2. Install Dependencies Correctly
```bash
# Use legacy peer deps to avoid conflicts
npm install --legacy-peer-deps

# Or if that doesn't work, try:
npm install --force
```

#### 3. Clear Cache and Rebuild
```bash
# Clear Next.js cache
rm -rf .next

# Clear node_modules and reinstall
rm -rf node_modules package-lock.json
npm install --legacy-peer-deps
```

#### 4. Check Component Exports
Ensure all components are properly exported:

```typescript
// ✅ Good - default export
export default function ComponentName() { ... }

// ✅ Good - named export
export function ComponentName() { ... }

// ❌ Bad - no export
function ComponentName() { ... } // Missing export
```

## Error: "Cannot find module 'lucide-react'"

### Solution
```bash
npm install lucide-react --save
```

## Error: "Module not found: Can't resolve 'react-hook-form'"

### Solution
```bash
npm install react-hook-form @hookform/resolvers --save
```

## Error: "TypeError: Cannot read properties of undefined (reading 'charAt')"

### Cause
This occurs when trying to access properties of undefined objects, usually in dynamic content.

### Solution
Add null/undefined checks:
```typescript
// ❌ Bad
const initial = product.name.charAt(0);

// ✅ Good
const initial = product?.name?.charAt(0) || '';
```

## Error: "Hydration failed because the initial UI does not match what was rendered on the server"

### Cause
This is usually caused by:
1. Using `window` or `document` in server components
2. Mismatched rendering between server and client

### Solution
```typescript
// ❌ Bad - in server component
const isClient = window !== undefined;

// ✅ Good - use useEffect for client-side only code
useEffect(() => {
  // Client-side only code here
}, []);
```

## Error: "Image not found"

### Solution
Create placeholder images or ensure images exist:
```bash
mkdir -p public/images/products public/images/work public/images/team

# Create simple placeholder SVGs
cat > public/images/products/placeholder.svg << 'EOF'
<svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
  <rect width="400" height="300" fill="#f3f4f6"/>
  <text x="200" y="150" text-anchor="middle" dy=".3em" font-family="Arial" font-size="20" fill="#6b7280">
    Product Image
  </text>
</svg>
EOF
```

## Quick Fix Script

Run this script to fix most common issues:
```bash
#!/bin/bash
echo "Fixing common errors..."

# 1. Install dependencies with legacy peer deps
npm install --legacy-peer-deps --no-audit --no-fund

# 2. Create required directories
mkdir -p public/images/{products,work,team}

# 3. Clear Next.js cache
rm -rf .next

# 4. Try to start dev server
echo "Starting development server..."
npm run dev
```

## Development Tips

1. **Always use TypeScript**: It catches many errors at compile time
2. **Check imports**: Ensure all imports are correct and components are exported
3. **Use proper React hooks**: Don't use hooks in server components
4. **Test in different modes**: Try `npm run build` to catch production errors
5. **Check browser console**: Many errors are logged there

## If Nothing Works

1. Check the specific component mentioned in the error
2. Verify all dependencies in package.json are installed
3. Try running with `--turbo` flag: `npm run dev -- --turbo`
4. Check if you're using the correct Node.js version (18+)
5. Try deleting and reinstalling node_modules completely

## Getting Help

If you continue to experience issues:
1. Check the browser console for detailed error messages
2. Look at the Next.js dev overlay for component-specific errors
3. Verify all file paths and imports are correct
4. Ensure all required dependencies are listed in package.json